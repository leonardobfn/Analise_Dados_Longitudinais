<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR" xml:lang="pt-BR"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Peso de Bezerros</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="Analise_files/libs/clipboard/clipboard.min.js"></script>
<script src="Analise_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Analise_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Analise_files/libs/quarto-html/popper.min.js"></script>
<script src="Analise_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Analise_files/libs/quarto-html/anchor.min.js"></script>
<link href="Analise_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Analise_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Analise_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Analise_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Analise_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Peso de Bezerros</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="objetivo-do-estudo" class="level1">
<h1>Objetivo do Estudo</h1>
<p>O objetivo deste estudo é explorar o <strong>crescimento de bezerros entre a 12ª e a 26ª semana de vida</strong>, utilizando <strong>dados longitudinais com medidas repetidas</strong>. A análise inicial se concentra em <strong>compreender padrões gerais e individuais de crescimento</strong>, identificar <strong>variabilidade entre e dentro dos animais</strong>, e introduzir conceitos fundamentais de <strong>análise de dados longitudinais</strong> por meio da <strong>Análise Exploratória de Dados (AED)</strong>. Exemplo do livro <span class="citation" data-cites="morettin2025estatistica">(<a href="#ref-morettin2025estatistica" role="doc-biblioref">Morettin e Singer 2023</a>)</span></p>
</section>
<section id="compreensão-da-base-de-dados" class="level1">
<h1>1. Compreensão da Base de Dados</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># carregando a base de dados</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_xls</span>(<span class="st">"../../Dados/Dados_Livro_Estatistica_e_CD/bezerros.xls"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Quantos animais estão na base de dados e quantas medições cada animal possui?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dados)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 15
Columns: 9
$ ind &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15
$ t12 &lt;dbl&gt; 54.1, 91.7, 64.2, 70.3, 68.3, 43.9, 87.4, 74.5, 50.5, 91.0, 83.3, …
$ t14 &lt;dbl&gt; 65.4, 104.0, 81.0, 80.0, 77.2, 48.1, 95.4, 86.8, 55.0, 95.5, 89.7,…
$ t16 &lt;dbl&gt; 75.1, 119.2, 91.5, 90.0, 84.2, 58.3, 110.5, 94.4, 59.1, 109.8, 99.…
$ t18 &lt;dbl&gt; 87.9, 133.1, 106.9, 102.6, 96.2, 68.6, 122.5, 103.6, 68.9, 124.9, …
$ t20 &lt;dbl&gt; 98.0, 145.4, 117.1, 101.2, 104.1, 78.5, 127.0, 110.7, 78.2, 135.9,…
$ t22 &lt;dbl&gt; 108.7, 156.5, 127.7, 120.4, 114.0, 86.8, 136.3, 120.0, 75.1, 148.0…
$ t24 &lt;dbl&gt; 124.2, 167.2, 144.2, 130.9, 123.0, 99.9, 144.8, 126.7, 79.0, 154.5…
$ t26 &lt;dbl&gt; 131.3, 176.8, 154.9, 137.1, 132.0, 106.2, 151.5, 132.2, 77.0, 167.…</code></pre>
</div>
</div>
<ul>
<li>15 animais. Cada animal possui 8 medições</li>
</ul>
<ol start="2" type="1">
<li>Quantas vezes o peso final (26ª semana) é maior que o peso inicial (12ª semana) para cada animal? Dica: calcular a razão <code>peso_final / peso_inicial</code> para cada animal.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">razao =</span> dados<span class="sc">$</span>t26<span class="sc">/</span>dados<span class="sc">$</span>t12 )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 2.426987 1.928026 2.412773 1.950213 1.932650 2.419134 1.733410 1.774497
 [9] 1.524752 1.841758 1.884754 1.762779 1.932021 1.763469 1.830389</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(razao)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.525   1.769   1.885   1.941   1.941   2.427 </code></pre>
</div>
</div>
<ul>
<li>Em média, houve um aumento de 94% nos pesos do bezerro quando comparado a primeira e a última semana</li>
</ul>
</section>
<section id="visualização-geral-do-crescimento" class="level1">
<h1>2. Visualização Geral do Crescimento</h1>
<ol start="3" type="1">
<li>Como o peso de cada animal varia ao longo das semanas? (Faça um gráfico de linhas por animal)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformando a base para o formato longer</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="ot">=</span> <span class="fu">pivot_longer</span>(dados,<span class="at">col=</span><span class="sc">-</span>ind,<span class="at">names_to =</span> <span class="st">"Semanas"</span>,<span class="at">values_to =</span> <span class="st">"Peso(Kg)"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados.longer,<span class="dv">10</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
     ind Semanas `Peso(Kg)`
   &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;
 1     1 t12           54.1
 2     1 t14           65.4
 3     1 t16           75.1
 4     1 t18           87.9
 5     1 t20           98  
 6     1 t22          109. 
 7     1 t24          124. 
 8     1 t26          131. 
 9     2 t12           91.7
10     2 t14          104  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remover o "t"</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="ot">=</span> dados.longer <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Semanas =</span> <span class="fu">str_extract</span>(Semanas,<span class="st">"[0-9]+"</span>))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados.longer,<span class="dv">10</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
     ind Semanas `Peso(Kg)`
   &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;
 1     1 12            54.1
 2     1 14            65.4
 3     1 16            75.1
 4     1 18            87.9
 5     1 20            98  
 6     1 22           109. 
 7     1 24           124. 
 8     1 26           131. 
 9     2 12            91.7
10     2 14           104  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gráfico 1</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados.longer,<span class="fu">aes</span>(<span class="at">x=</span>Semanas,<span class="at">y=</span><span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>,<span class="at">group =</span> ind,<span class="at">colour =</span> <span class="fu">factor</span>(ind))) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color=</span><span class="st">"Indivíduo"</span>)<span class="sc">+</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analise_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gráfico 2</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados.longer,<span class="fu">aes</span>(<span class="at">x=</span>Semanas,<span class="at">y=</span><span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>,<span class="at">group =</span> ind)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color=</span><span class="st">"Indivíduo"</span>)<span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>ind) <span class="sc">+</span> </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analise_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Qual é o peso médio de bezerros em cada semana? Existe grande variabilidade entre os animais? (Boxplot)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Semanas) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">desvio_padrao =</span> <span class="fu">sd</span>(<span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">cv =</span> desvio_padrao<span class="sc">/</span>media)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 4
  Semanas media desvio_padrao    cv
  &lt;chr&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;
1 12       69.6          15.2 0.218
2 14       77.7          16.0 0.207
3 16       87.2          18.6 0.213
4 18       98.2          20.0 0.203
5 20      107.           19.9 0.187
6 22      116.           22.6 0.194
7 24      125.           23.6 0.189
8 26      134.           26.6 0.199</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#gráfico 1</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados.longer,<span class="fu">aes</span>(<span class="at">x =</span> Semanas,<span class="at">y=</span><span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>,<span class="at">colour =</span> Semanas))<span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_jitter</span>()<span class="sc">+</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="co"># removendo a legenda</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analise_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#gráfico 2</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados.longer,<span class="fu">aes</span>(<span class="at">x =</span> Semanas,<span class="at">y=</span><span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>,<span class="at">colour =</span> Semanas))<span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="co"># removendo a legenda</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analise_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Quais padrões gerais de crescimento podemos observar na média ao longo das semanas?</li>
</ol>
</section>
<section id="resumo-estatístico-por-semana" class="level1">
<h1>3. Resumo Estatístico por Semana</h1>
<ol start="6" type="1">
<li>Qual é a média, mediana, mínimo, máximo e quartis do peso em cada semana?</li>
<li>A variação do peso aumenta, diminui ou se mantém ao longo do tempo?</li>
</ol>
</section>
<section id="padrões-individuais-e-variabilidade" class="level1">
<h1>4. Padrões Individuais e Variabilidade</h1>
<ol start="8" type="1">
<li>Como diferem as trajetórias individuais de crescimento entre os animais?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ind) <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">desvio_padrao =</span> <span class="fu">sd</span>(<span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">cv =</span> desvio_padrao<span class="sc">/</span>media)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 4
     ind media desvio_padrao    cv
   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;
 1     1  93.1          27.6 0.297
 2     2 137.           30.3 0.221
 3     3 111.           31.2 0.282
 4     4 104.           23.9 0.230
 5     5  99.9          22.5 0.226
 6     6  73.8          23.1 0.313
 7     7 122.           22.9 0.187
 8     8 106.           20.1 0.190
 9     9  67.8          11.4 0.168
10    10 128.           28.0 0.218
11    11 117.           26.1 0.223
12    12 105.           20.1 0.192
13    13  83.7          20.3 0.242
14    14  99.3          20.6 0.207
15    15  80.0          16.4 0.205</code></pre>
</div>
</div>
</section>
<section id="tendências-e-correlações" class="level1">
<h1>5. Tendências e Correlações</h1>
<ol start="9" type="1">
<li>Existe uma tendência geral de crescimento linear ou não-linear? Faça um scaterplot e calcule as correlações.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(dados[,<span class="sc">-</span><span class="dv">1</span>])</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          t12       t14       t16       t18       t20       t22       t24
t12 1.0000000 0.9721534 0.9603725 0.9257640 0.9074319 0.9033361 0.8394016
t14 0.9721534 1.0000000 0.9870123 0.9649566 0.9441129 0.9466669 0.9071129
t16 0.9603725 0.9870123 1.0000000 0.9884339 0.9702923 0.9667980 0.9343387
t18 0.9257640 0.9649566 0.9884339 1.0000000 0.9848997 0.9820387 0.9580330
t20 0.9074319 0.9441129 0.9702923 0.9848997 1.0000000 0.9795596 0.9530074
t22 0.9033361 0.9466669 0.9667980 0.9820387 0.9795596 1.0000000 0.9863936
t24 0.8394016 0.9071129 0.9343387 0.9580330 0.9530074 0.9863936 1.0000000
t26 0.8474160 0.9020658 0.9251241 0.9386807 0.9390688 0.9789593 0.9910657
          t26
t12 0.8474160
t14 0.9020658
t16 0.9251241
t18 0.9386807
t20 0.9390688
t22 0.9789593
t24 0.9910657
t26 1.0000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dados[,<span class="sc">-</span><span class="dv">1</span>])</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analise_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="10" type="1">
<li>Como podemos começar a pensar em <strong>modelos</strong> a partir dessas observações?</li>
</ol>
</section>
<section id="transformações-e-medidas-relativas" class="level1">
<h1>6. Transformações e Medidas Relativas</h1>
<ol start="11" type="1">
<li>Como calcular o crescimento relativo (percentual) de cada animal ao longo do período? Considere como referência o peso incial.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ind) <span class="sc">|&gt;</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">r1 =</span> (<span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>[<span class="dv">1</span>])<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 120 × 2
# Groups:   ind [15]
     ind    r1
   &lt;dbl&gt; &lt;dbl&gt;
 1     1 0    
 2     1 0.209
 3     1 0.388
 4     1 0.625
 5     1 0.811
 6     1 1.01 
 7     1 1.30 
 8     1 1.43 
 9     2 0    
10     2 0.134
# ℹ 110 more rows</code></pre>
</div>
</div>
<ol start="12" type="1">
<li>Ao dividir o peso de cada animal pelo <strong>peso médio da semana</strong> (crescimento relativo à média), que tipo de informação podemos extrair sobre os animais?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Semanas) <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media_semana =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>),</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">r2 =</span> <span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span><span class="sc">/</span>media_semana)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 120 × 3
# Groups:   Semanas [8]
   Semanas media_semana    r2
   &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt;
 1 12              69.6 0.777
 2 12              69.6 1.32 
 3 12              69.6 0.922
 4 12              69.6 1.01 
 5 12              69.6 0.981
 6 12              69.6 0.631
 7 12              69.6 1.26 
 8 12              69.6 1.07 
 9 12              69.6 0.726
10 12              69.6 1.31 
# ℹ 110 more rows</code></pre>
</div>
</div>
<p>Se <span class="math inline">\(r2 &lt; 1\)</span> indica que o peso do animal está abaixo da média da semana. Animais com peso_relativo muito acima ou abaixo da média por várias semanas podem indicar algum comportmento atípico. Essa razão também é uma maneira de padronizar os pesos pelo peso médio da semana, dessa forma, todos os animais são comparados na mesma escala relativa.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Semanas) <span class="sc">|&gt;</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media_semana =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>),</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">r2 =</span> <span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span><span class="sc">/</span>media_semana) <span class="sc">|&gt;</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Semanas) <span class="sc">|&gt;</span> </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">9</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 3
# Groups:   Semanas [8]
  Semanas media_semana    r2
  &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt;
1 12              69.6 0.726
2 14              77.7 0.708
3 16              87.2 0.678
4 18              98.2 0.702
5 20             107.  0.732
6 22             116.  0.645
7 24             125.  0.631
8 26             134.  0.576</code></pre>
</div>
</div>
<section id="outras-medidas" class="level2">
<h2 class="anchored" data-anchor-id="outras-medidas">Outras medidas</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ind) <span class="sc">|&gt;</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">d =</span> <span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span><span class="sc">-</span> <span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span>[<span class="dv">1</span>])</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 120 × 2
# Groups:   ind [15]
     ind     d
   &lt;dbl&gt; &lt;dbl&gt;
 1     1   0  
 2     1  11.3
 3     1  21  
 4     1  33.8
 5     1  43.9
 6     1  54.6
 7     1  70.1
 8     1  77.2
 9     2   0  
10     2  12.3
# ℹ 110 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ind) <span class="sc">|&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">do</span>(<span class="fu">tidy</span>(<span class="fu">lm</span>(<span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(Semanas), <span class="at">data =</span> .)))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 6
# Groups:   ind [15]
     ind term                estimate std.error statistic  p.value
   &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1     1 (Intercept)           -13.8     2.32       -5.97 9.91e- 4
 2     1 as.numeric(Semanas)     5.63    0.118      47.5  5.84e- 9
 3     2 (Intercept)            19.6     3.48        5.62 1.36e- 3
 4     2 as.numeric(Semanas)     6.17    0.178      34.6  3.89e- 8
 5     3 (Intercept)           -10.0     2.87       -3.50 1.29e- 2
 6     3 as.numeric(Semanas)     6.37    0.147      43.3  1.01e- 8
 7     4 (Intercept)            12.2     5.57        2.20 7.04e- 2
 8     4 as.numeric(Semanas)     4.83    0.285      17.0  2.70e- 6
 9     5 (Intercept)            12.5     1.39        8.99 1.06e- 4
10     5 as.numeric(Semanas)     4.60    0.0714     64.4  9.42e-10
# ℹ 20 more rows</code></pre>
</div>
</div>
<ul>
<li><p>Como a regressão linear assume relação linear para toda a reta, mas temos dados entre semanas 12 e 26, o intercepto não faz sentido fora dessa faixa.</p></li>
<li><p><span class="math inline">\(\beta_1\)</span> é a inclinação, ou seja, taxa de crescimento em Kg/semana</p></li>
<li><p>Podemos ter intercepto com interpretação mais realista, nesse caso é preciso centralizar o tempo. Por exemplo, redefinir a semana inicial como zero:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>dados.longer <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Semana_c =</span> <span class="fu">as.numeric</span>(Semanas) <span class="sc">-</span> <span class="dv">12</span>) <span class="sc">|&gt;</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ind) <span class="sc">|&gt;</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">do</span>(<span class="fu">tidy</span>(<span class="fu">lm</span>(<span class="st">`</span><span class="at">Peso(Kg)</span><span class="st">`</span> <span class="sc">~</span> Semana_c, <span class="at">data =</span> .)))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 6
# Groups:   ind [15]
     ind term        estimate std.error statistic  p.value
   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1     1 (Intercept)    53.7     0.991       54.2 2.66e- 9
 2     1 Semana_c        5.63    0.118       47.5 5.84e- 9
 3     2 (Intercept)    93.6     1.49        62.7 1.10e- 9
 4     2 Semana_c        6.17    0.178       34.6 3.89e- 8
 5     3 (Intercept)    66.4     1.23        54.0 2.71e- 9
 6     3 Semana_c        6.37    0.147       43.3 1.01e- 8
 7     4 (Intercept)    70.2     2.39        29.4 1.02e- 7
 8     4 Semana_c        4.83    0.285       17.0 2.70e- 6
 9     5 (Intercept)    67.7     0.597      113.  3.17e-11
10     5 Semana_c        4.60    0.0714      64.4 9.42e-10
# ℹ 20 more rows</code></pre>
</div>
</div>
<p>-O intercepto depende de como definimos a variável tempo.</p>
<p>-Ao centralizar, ganhamos uma interpretação mais útil: o peso previsto no início da observação (semana 12).</p>
<p>-A inclinação não muda, porque a taxa de crescimento é independente da forma como medimos o tempo.</p>
</section>
</section>
<section id="discussão-e-interpretação" class="level1">
<h1>7. Discussão e Interpretação</h1>
<ol start="13" type="1">
<li>Que padrões gerais e individuais de crescimento podem ser observados na turma de bezerros?</li>
<li>Quais considerações iniciais podemos tirar sobre a variabilidade entre e dentro de sujeitos?</li>
<li>Como essas observações podem guiar a escolha de modelos longitudinais mais avançados?</li>
</ol>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Referências</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-morettin2025estatistica" class="csl-entry" role="listitem">
Morettin, Pedro Alberto, e Júlio da Motta Singer. 2023. <em>Estatística e Ciência de Dados</em>. Gen,LTC.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>